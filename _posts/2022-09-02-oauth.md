---
title: OAuthê°€ ì¸ì¦ì´ ì•„ë‹Œ ì´ìœ , ê·¸ë¦¬ê³  OpenID Connect
tags: oauth oidc openidconnect authentication authorization
---

## Terminology
Authenticationê³¼ Authorizationì˜ ìš©ì–´ë¶€í„° ì§šì–´ë³´ì.

- [Authorization (í—ˆê°€)](https://ko.wikipedia.org/wiki/%ED%97%88%EA%B0%80_(%EC%BB%B4%ED%93%A8%ED%84%B0_%EA%B3%BC%ED%95%99)){:target="_blank"}: ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œ ë° ì •ì±…ì„ ì§€ì •í•˜ëŠ” ê¸°ëŠ¥
- [Authentication (ì¸ì¦)](https://ko.wikipedia.org/wiki/%EC%9D%B8%EC%A6%9D){:target="_blank"}: ì°¸ì´ë¼ëŠ” ê·¼ê±°ê°€ ìˆëŠ” ë¬´ì–¸ê°€ë¥¼ í™•ì¸í•˜ê±°ë‚˜ í™•ì¦í•˜ëŠ” í–‰ìœ„
  - ì‚¬ìš©ì ì¸ì¦ì— í•œì •í•˜ìë©´, A ìœ ì €ê°€ ì •ë§ Aì¸ì§€ ê²€ì¦í•˜ëŠ” í–‰ìœ„ë¼ í•˜ê² ë‹¤.


## OAuth 2.0
[OAuth](https://www.rfc-editor.org/rfc/rfc6749.html){:target="_blank"}ëŠ” í—ˆê°€(Authorization Framework)ì— í•´ë‹¹í•œë‹¤.

### Abstract Flow
Grant Typeì— ë”°ë¼ Flowê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì§€ë§Œ, OAuth 2.0ì˜ ì¶”ìƒí™”ëœ Flowë¥¼ ì‚´í´ë³´ì.

     +--------+                               +---------------+
     |        |--(A)- Authorization Request ->|   Resource    |
     |        |                               |     Owner     |
     |        |<-(B)-- Authorization Grant ---|               |
     |        |                               +---------------+
     |        |
     |        |                               +---------------+
     |        |--(C)-- Authorization Grant -->| Authorization |
     | Client |                               |     Server    |
     |        |<-(D)----- Access Token -------|               |
     |        |                               +---------------+
     |        |
     |        |                               +---------------+
     |        |--(E)----- Access Token ------>|    Resource   |
     |        |                               |     Server    |
     |        |<-(F)--- Protected Resource ---|               |
     +--------+                               +---------------+


ê°œë°œìê°€ ì‚¬ìš©ìì˜ Google ìì›ì— ì ‘ê·¼í•˜ê² ë‹¤ê³  í•œë‹¤ë©´,
- Client: Developer's Backend Server or iOS Application, etc..
- Resource Owner: User
- Authorization Server: Google's Authorization Server
- Resource Server: Google's Resource Server

ì´ì œ OAuth 2.0ì—ì„œì˜ Access Tokenì„ ì•Œì•„ë³´ê³ , OAuth 2.0 Protocolì„ ì¸ì¦ì— ì‚¬ìš©ë˜ë©´ ì•ˆë˜ëŠ” ì´ìœ ì— ëŒ€í•´ ì‚´í´ë³´ì. 
  
### Access Tokenì„ ì‚¬ìš©ì ì¸ì¦ì— ì‚¬ìš©í•´ë„ ë ê¹Œ?
**ê·¸ë ‡ì§€ ì•Šë‹¤.** OAuth 2.0 Protocolì€ [ì‚¬ìš©ì ì¸ì¦ì´ OAuthì˜ ìŠ¤í™ì„ ë„˜ì–´ì„œëŠ” ê²ƒ](https://www.rfc-editor.org/rfc/rfc6749.html#section-10.16){:target="_blank"}ì´ë¼ê³  ë§í•œë‹¤.

> 10.16.  Misuse of Access Token to Impersonate Resource Owner in Implicit Flow\
> ... Authenticating resource owners to clients is out of scope for this specification. ...

Access Tokenì˜ AudienceëŠ” ëˆ„êµ¬ì¼ê¹Œ? ì¼ë°˜ì ìœ¼ë¡œ [ìì› ì„œë²„](https://www.rfc-editor.org/rfc/rfc6750#section-5.2){:target="_blank"}ì´ë‹¤.

> ... it is important for the authorization server to include the identity of the intended recipients (the audience), typically a single resource server (or a list of resource servers), in the token.

Access Tokenì€ ë³´í†µ í´ë¼ì´ì–¸íŠ¸ê°€ [ì´í•´í•˜ê¸° ì–´ë ¤ìš´(opaque) String](https://www.rfc-editor.org/rfc/rfc6749.html#section-1.4){:target="_blank"}ì´ë‹¤.

> 1.4.  Access Token\
> ... The string is usually opaque to the client. ...

ì¦‰, Access Tokenì€ í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë¼ê³  ë§Œë“ ê²Œ ì•„ë‹ˆë‹¤. ê·¸ì € ìì› ì„œë²„ê°€ ìœ íš¨í•œ í† í°ì¸ì§€ í™•ì¸í•˜ê³  í—ˆê°€ëœ ìì›ì— í•œí•´ ë°˜í™˜í•  ìˆ˜ ìˆë„ë¡ ì¸ì¦ ì„œë²„ê°€ ë°œê¸‰í•˜ëŠ” ê²ƒì´ê³ , í´ë¼ì´ì–¸íŠ¸ì—ê²ŒëŠ” ë‹¨ìˆœíˆ ìì› ì„œë²„ API ìš”ì²­ì— Access Tokenì„ ì²¨ë¶€í•˜ëŠ” ìš©ë„ì¼ ë¿ì´ë‹¤.\
í´ë¼ì´ì–¸íŠ¸ê°€ Access Tokenì˜ ë‚´ìš©ì„ í™•ì¸í•´ì„œ user id ê°’ì„ ë³´ê³ (ì‚¬ì‹¤ OAuthì—ëŠ” í‘œì¤€ìœ¼ë¡œ ì •ì˜ëœ access token formatë„ ì—†ìœ¼ë¯€ë¡œ, í´ë¼ì´ì–¸íŠ¸ê°€ user-idë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ë³´ì¥ë„ ì—†ë‹¤.) authenticated userë¼ê³  í•˜ëŠ” ê²ƒì€ OAuthì˜ ì‚¬ìš© ëª©ì ê³¼ ë‹¤ë¥´ë©° ë³´ì•ˆ ìœ„í—˜ì´ ì¡´ì¬í•œë‹¤.

OAuth 2.0ì—ì„œì˜ ì¸ê°€(Authorization)ëŠ” ì‚¬ìš©ì(Resource Owner)ë¥¼ ì¸ì¦(Authentication)í•œ í›„ì— ì¼ì–´ë‚˜ëŠ” ë§Œí¼, ì‚¬ìš©ì ì¸ì¦ì— ì‚¬ìš©í•´ë„ ë˜ì§€ ì•Šì„ê¹Œ?\
Access Tokenì´ ì‚¬ìš©ìì— ì˜í•´ ì¸ì¦ ì„œë²„ì—ì„œ ë°©ê¸ˆ ë§‰ ë°œê¸‰ëœ ì¼€ì´ìŠ¤ì—ì„  ê´œì°®ì€ ì–˜ê¸° ê°™ë‹¤. í•˜ì§€ë§Œ, Access Token ë°œê¸‰ì´ ì‚¬ìš©ì ì¸ì¦ ì‹œì—ë§Œ ì´ë£¨ì–´ì§€ëŠ” ê²ƒë„ ì•„ë‹ˆê³  (Refresh Tokenì— ì˜í•œ íšë“), [OAuth.net í¬ìŠ¤íŒ…](https://oauth.net/articles/authentication/){:target="_blank"}ì— ì˜í•˜ë©´ grant typeì— ë”°ë¼ì„œëŠ” ì‚¬ìš©ì ì¸ì¦ì´ ì „í˜€ ê´€ì—¬ë˜ì§€ ì•Šê¸°ë„ í•œë‹¤. ([Client Credentials Grant Type](https://www.rfc-editor.org/rfc/rfc6749#section-1.3.4){:target="_blank"}ì„ ë§í•˜ëŠ” ê²ƒ ê°™ì€ë°, ì´ë•ŒëŠ” ì‚¬ìš©ì ì •ë³´ë„ ì—†ì§€ ì•Šì„ê¹Œ í•˜ëŠ” ì˜ë¬¸ì´ ë“¤ê¸´ í•œë‹¤.)

> Access of a protected API as proof of authentication\
> Since the access token can be traded for a set of user attributes, it is tempting to think that posession of a valid access token is enough to prove that a user is authenticated. This assumption turns out to be true in some cases, where the token was freshly minted in the context of a user being authenticated at the authorization server. However, that's not the only way to get an access token in OAuth. Refresh tokens and assertions can be used to get access tokens without the user being present, and in some cases access grants can occur without the user having to authenticate at all.

ê·¸ ë°–ì˜ ìœ„í—˜ì„±ì— ëŒ€í•´ì„  ìœ„ì— ì–¸ê¸‰í•œ [OAuth.net í¬ìŠ¤íŒ…](https://oauth.net/articles/authentication/){:target="_blank"}ì„ ì°¸ì¡°í•˜ì.

ì´ì œ OAuthê°€ ì¸ì¦ì´ ì•„ë‹ˆë€ê±´ ì•Œê² ë‹¤. ê·¸ëŸ¼ ì¸ì¦ ëŒ€í–‰ì€ ì–´ë–¤ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?

## OpenID Connect
[OpenID Connect (OIDC)](https://openid.net/connect/){:target="_blank"}ëŠ” ì¸ì¦(Authentication)ì— í•´ë‹¹í•œë‹¤.

(ì‘ì„±ì¤‘...)

## ë²ˆì™¸

### Sign in with Appleì€ ì–´ë–¤ í”„ë¡œí† ì½œì¼ê¹Œ?

ì‚¬ì‹¤ Sign in with Appleì„ ì•Œì•„ë³´ë˜ ì¤‘ Appleì€ ë¬´ìŠ¨ í”„ë¡œí† ì½œì„ ì±„íƒí•œê±´ê°€ ë¦¬ì„œì¹˜í•˜ë‹¤ê°€ OAuthê°€ ì¸ì¦ì´ ì•„ë‹ˆë€ ê²ƒë„ ì•Œê³ .. OIDCì˜ ì¡´ì¬ë„ ì•Œê²Œ ë˜ì—ˆë‹¤. ğŸ˜…\
Appleì€ **OpenID Connectì„ ì±„íƒ**í–ˆì§€ë§Œ, [ì°¨ì´](https://bitbucket.org/openid/connect/src/master/How-Sign-in-with-Apple-differs-from-OpenID-Connect.md){:target="_blank"}ê°€ ìˆë‹¤.\
OpenID ì¬ë‹¨ì€ ì´ëŸ¬í•œ Appleì— ìì‹ ë“¤ì˜ í‘œì¤€(OIDC)ì— ì°¸ì—¬í•˜ë„ë¡ [ê³µê°œ ì„œí•œ](https://openid.net/2019/06/27/open-letter-from-the-openid-foundation-to-apple-regarding-sign-in-with-apple/){:target="_blank"}ë„ ë³´ëƒˆë‹¤.